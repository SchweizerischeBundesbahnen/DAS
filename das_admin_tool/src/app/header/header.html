<sbb-header expanded>
  <span class="sbb-header-info">
    <strong i18n="@@c_header_app_name">DAS Admin-Tool</strong>
    <span>V. {{ version }}</span>
  </span>
  <div class="sbb-header-spacer"></div>
  @if (oidcSecurityService.authenticated().isAuthenticated) {
    <sbb-header-button iconName="user-small" class="sbb-header-shrinkable" id="user-menu-trigger">
      {{oidcSecurityService.userData().userData.name }}
    </sbb-header-button>
    <sbb-menu trigger="user-menu-trigger">
      <div class="email">{{oidcSecurityService.userData().userData.preferred_username }}</div>
      @for (role of roles(); track role) {
        <span class="role">{{role}}</span>
      }
      <sbb-divider></sbb-divider>
      <sbb-menu-button icon-name="user-plus-small" (click)="switchLogin()" i18n="@@c_header_switch_account_button">Account wechseln</sbb-menu-button>
      <sbb-divider></sbb-divider>
      <sbb-menu-button icon-name="exit-small" (click)="logout()" i18n="@@c_header_logout_button">Logout</sbb-menu-button>
    </sbb-menu>
  }
  @else {
    <sbb-header-button iconName="user-small" class="sbb-header-shrinkable"
                       i18n="@@c_header_login_button" (click)="login()">
      Login
    </sbb-header-button>
  }

  <sbb-header-button iconName="globe-small" id="language-menu-trigger" class="last-element">
    {{ currentLanguage?.label }}
  </sbb-header-button>
  <sbb-menu trigger="language-menu-trigger">
    @for (language of languages; track language.localeId) {
      <sbb-menu-link (click)="switchLanguage(language.path)"
                     [iconName]="language.localeId === currentLanguage?.localeId ? 'tick-small': ''">{{ language.label }}
      </sbb-menu-link>
    }
  </sbb-menu>
  <sbb-header-environment>{{ stage !== 'prod' ? stage : '' }}</sbb-header-environment>
</sbb-header>
