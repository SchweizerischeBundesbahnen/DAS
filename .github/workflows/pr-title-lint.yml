name: PR Title Linter
on:
  push:
    branches: [ "sfera-playground" ]
#on:
#  pull_request:
#    types: [opened, edited, reopened, unlocked]

permissions: read-all

jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - name: Install commitlint
        run: |
          npm install @commitlint/config-conventional
          npm install commitlint@latest
          echo "module.exports = { extends: ['@commitlint/config-conventional'] };" > commitlint.config.js
      - name: "Lint: Pull request title"
        env:
          PR_TITLE: ${{ github.event.pull_request.title }}
        run: echo "test" | npx commitlint

      - name: "Warning: Pull request title must match patterns defined in CONTRIBUTING.md in section Commit Message Guidelines!"
        if: ${{ failure() }}
        run: echo "Pull request title must match patterns defined in CONTRIBUTING.md in section Commit Message Guidelines!"
