info:
  app:
    version: '@project.version@'
spring:
  profiles:
    active: ${STAGE:local}
  application:
    name: backend
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: https://login.microsoftonline.com/2cda5d11-f0ac-46b3-967d-af1b2e1bd01a/discovery/v2.0/keys
          issuer-uri: https://login.microsoftonline.com/2cda5d11-f0ac-46b3-967d-af1b2e1bd01a/v2.0
      authorizationUrl: https://login.microsoftonline.com/common/oauth2/v2.0
  jackson:
    mapper:
      accept-case-insensitive-enums: true
    time-zone: CET
  datasource:
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    url: ${DB_URL}
  flyway:
    baseline-on-migrate: true
  kafka:
    consumer:
      bootstrap-servers: ${ZIS_BOOTSTRAP_URL}
      key-deserializer: io.confluent.kafka.serializers.json.KafkaJsonSchemaDeserializer
      value-deserializer: io.confluent.kafka.serializers.json.KafkaJsonSchemaDeserializer
      auto-offset-reset: latest
      group-id: ${ZIS_GROUP_ID}
      properties:
        schema.registry.url: ${ZIS_SR_URL}
        json:
          value.type: ch.sbb.zis.trainformation.api.model.DailyFormationTrain
          key.type: ch.sbb.zis.trainformation.api.model.DailyFormationTrainKey
          fail.invalid.schema: true
    jaas:
      enabled: true
      login-module: org.apache.kafka.common.security.plain.PlainLoginModule
      options:
        username: ${ZIS_API_KEY}
        password: ${ZIS_API_SECRET}
    security:
      protocol: SASL_SSL
    properties:
      sasl.mechanism: PLAIN
      connections.max.idle.ms: 340000
      basic.auth:
        credentials.source: USER_INFO
        user.info: ${ZIS_SR_API_KEY}:${ZIS_SR_API_SECRET}
      schema.registry.url: ${ZIS_SR_URL}
management:
  endpoint:
    health:
      probes:
        enabled: true
springdoc:
  swagger-ui:
    oauth:
      clientId: ${AUTH_SWAGGER_CLIENT_ID}
      use-pkce-with-authorization-code-grant: true
auth:
  audience:
    service-name: ${AUTH_SERVICE_NAME}
  tenants:
    - name: sbb
      id: 2cda5d11-f0ac-46b3-967d-af1b2e1bd01a
      issuer-uri: https://login.microsoftonline.com/2cda5d11-f0ac-46b3-967d-af1b2e1bd01a/v2.0
      jwk-set-uri: https://login.microsoftonline.com/2cda5d11-f0ac-46b3-967d-af1b2e1bd01a/discovery/v2.0/keys
    - name: sob
      id: d653d01f-17a4-48a1-9aab-b780b61b4273
      issuer-uri: https://login.microsoftonline.com/d653d01f-17a4-48a1-9aab-b780b61b4273/v2.0
      jwk-set-uri: https://login.microsoftonline.com/d653d01f-17a4-48a1-9aab-b780b61b4273/discovery/v2.0/keys
    - name: bls
      id: a64ce5df-4ad8-40b9-91ee-54bac2bb8326
      issuer-uri: https://login.microsoftonline.com/a64ce5df-4ad8-40b9-91ee-54bac2bb8326/v2.0
      jwk-set-uri: https://login.microsoftonline.com/a64ce5df-4ad8-40b9-91ee-54bac2bb8326/discovery/v2.0/keys
zis:
  kafka.topic: zis.inte.trafo.trainformation.operational
logging:
  url: ${SPLUNK_HEC_URL}
  token: ${SPLUNK_HEC_TOKEN}
